<div class="card-body ">
	<%= form_for [:admin, product] do |f| %>
		<% @form_id = f.options[:html][:id] %>

	  <div class="form-group bmd-form-group">
	  	<% images_exist = f.object.images.attached? %>
	    <label>產品圖片</label><br>
	    <div class="fileinput <%= images_exist ? 'fileinput-exists' : 'fileinput-new' %> text-center" data-provides="fileinput">
	    	<% if product.images.attached? %>
        	<% product.images.each do |img| %>
        		<div class="fileinput-preview fileinput-exists thumbnail" style="">
			      	<%= image_tag(img.variant(resize: "600x600"), style: "max-width: 200px;") %>
        		</div>
		      <% end %>
		    <% end %>
		    <br>
        <span class="btn btn-rose btn-round btn-file">
          <span class="fileinput-new">選擇檔案</span>
          <span class="fileinput-exists">更換</span>
          <input type="hidden">
          <%= f.file_field :images, multiple: true, accept: ".png, .jpg, .jpeg, .pdf" %>
        	<div class="ripple-container"></div>
      	</span>
        <a href="#pablo" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput"><i class="fa fa-times"></i> 移除</a>
      </div>
	  </div>

	  <div class="clearfix my-5"></div>

		<div class="form-group bmd-form-group">
			<% file_exist = f.object.file.attached? %>
	    <label>目錄檔案</label><br>
	    <div class="fileinput <%= file_exist ? 'fileinput-exists' : 'fileinput-new' %> text-center" data-provides="fileinput">
      	<% if file_exist %>
        	<% if product.file.previewable? %>
		        <div class="fileinput-preview fileinput-exists thumbnail" style="">
			        <%= link_to(image_tag(product.file.preview(resize: "600x600>")),  rails_blob_path(product.file, disposition: "attachment")) %>
			      </div>
		      <% elsif product.file.variable? %>
      			<div class="fileinput-preview fileinput-exists thumbnail" style="">
		        	<%= link_to(image_tag(product.file.variant(resize: "600x600")), rails_blob_path(product.file, disposition: "attachment")) %>
		        </div>
		      <% else %>
		      	<div class="my-3">
		        	<%= link_to "下載附件 #{product.file.filename.to_s}", rails_blob_path(product.file, disposition: "attachment") %>
		        </div>
		      <% end %>
		    <% end %>
		    <br>
        <span class="btn btn-rose btn-round btn-file">
          <span class="fileinput-new">選擇檔案</span>
          <span class="fileinput-exists">更換</span>
          <input type="hidden">
          <%= f.file_field :file, accept: ".png, .jpg, .jpeg, .pdf" %>
        	<div class="ripple-container"></div>
      	</span>
        <a href="#pablo" class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput"><i class="fa fa-times"></i> 移除</a>
      </div>
	  </div>
	  
	  <div class="clearfix my-5"></div>

		<div class="form-group bmd-form-group">
			<%= f.label :zh_name, class: "bmd-label-floating" %>
			<%= f.text_field :zh_name, class: "form-control" %>
		</div>
		<div class="form-group bmd-form-group">
			<%= f.label :zh_description, class: "bmd-label-floating" %>
			<%= f.text_area :zh_description, class: "form-control", rows: 7 %>
		</div>
		
		<div class="clearfix my-5"></div>

		<div class="form-group bmd-form-group">
			<%= f.label :en_name, class: "bmd-label-floating" %>
			<%= f.text_field :en_name, class: "form-control" %>
		</div>
		<div class="form-group bmd-form-group">
			<%= f.label :en_description, class: "bmd-label-floating" %>
			<%= f.text_area :en_description, class: "form-control", rows: 7 %>
		</div>
		
		<div class="clearfix my-5"></div>

		<div class="form-group bmd-form-group">
			<div class="togglebutton">
		  	<label>
		  			<%= f.check_box :status, {}, "published", "draft" %>
	          <span class="toggle bg-brand"></span>
	            上架至前台
		  	</label>
		  </div>
		</div>
	<% end %>
</div>
<div class="card-footer ">
	<%= submit_tag I18n.t("helpers.submit.#{action_name}"), class: "btn btn-fill btn-brand", form: dom_id(@product, action_name.to_sym) %>
</div>

<script>
	$(document).on('turbolinks:load', function() {
		setFormValidation("<%= '#' + @form_id %>");
	})
</script>